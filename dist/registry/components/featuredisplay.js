import e from"./featuredisplay.htm.js";import r from"./component.js";var t=new r(e,"featuredisplay");var i=t.getTemplate("featuredisplay");import o from"../../olMap.js";var a=o.get();import l from"../../select.js";import n from"../../measure.js";import s from"./popup.js";var p=s.getOverlay();l.displayOn((function(e){var r=p.get("element");if(e.selected.length>0){var t=e.selected[0];var o=i.querySelector(".featureDisplay").cloneNode(true);o.querySelector(".featureId").innerHTML=t.getId();var l=t.getProperties();for(var s in l){if(l[s]&&!l[s]["$oid"]&&s!="geometry"){var d=l[s]["$date"]?new Date(l[s]["$date"]):l[s];var f=i.querySelector(".featureAtt").cloneNode(true);f.innerHTML=s+": "+d;o.querySelector(".featureAtts").appendChild(f)}}var m=t.getGeometry();if(m.getType&&m.getType()==="LineString"){var y=n.getLength(m,a.get("view").getProjection());o.querySelector(".featureLenHav").innerHTML=Math.round(y*.1)/100}else{o.querySelector(".featureHav").style.display="none"}while(r.firstChild){r.removeChild(r.firstChild)}r.appendChild(o);r.style.display="block";p.set("position",e.mapBrowserEvent.coordinate)}else{while(r.firstChild){r.removeChild(r.firstChild)}r.style.display="none"}}));