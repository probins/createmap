import e from"./featuredisplay.htm.js";import r from"./component.js";var t=new r(e,"featuredisplay").getTemplate("featuredisplay");import o from"../../olMap.js";var i=o.get();import a from"../../select.js";import{getLength as l}from"../../measure.js";import{transformCoords as s}from"../../olUtils.js";import n from"./popup.js";var p=n.getOverlay();a.displayOn((function(e){var r=p.get("element");if(e.selected.length>0){var o=e.selected[0],a=t.querySelector(".featureDisplay").cloneNode(!0);a.querySelector(".featureId").innerHTML=o.getId();var n=o.getProperties();for(var d in n)if(n[d]&&!n[d].$oid&&"geometry"!=d){var f=n[d].$date?new Date(n[d].$date):n[d],m=t.querySelector(".featureAtt").cloneNode(!0);m.innerHTML=d+": "+f,a.querySelector(".featureAtts").appendChild(m)}var y=o.getGeometry();if(y.getType&&"LineString"===y.getType()){let e=s(y,i.get("view").getProjection());var u=l(e);a.querySelector(".featureLenHav").innerHTML=Math.round(.1*u)/100}else a.querySelector(".featureHav").style.display="none";for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(a),r.style.display="block",p.set("position",e.mapBrowserEvent.coordinate)}else{for(;r.firstChild;)r.removeChild(r.firstChild);r.style.display="none"}}));