import e from"./featuredisplay.htm.js";import r from"./component.js";var t=new r(e,"featuredisplay").getTemplate("featuredisplay");import o from"../../olMap.js";var i=o.get();import a from"../../select.js";import l from"../../measure.js";import n from"./popup.js";var s=n.getOverlay();a.displayOn((function(e){var r=s.get("element");if(e.selected.length>0){var o=e.selected[0],a=t.querySelector(".featureDisplay").cloneNode(!0);a.querySelector(".featureId").innerHTML=o.getId();var n=o.getProperties();for(var p in n)if(n[p]&&!n[p].$oid&&"geometry"!=p){var d=n[p].$date?new Date(n[p].$date):n[p],f=t.querySelector(".featureAtt").cloneNode(!0);f.innerHTML=p+": "+d,a.querySelector(".featureAtts").appendChild(f)}var m=o.getGeometry();if(m.getType&&"LineString"===m.getType()){var y=l.getLength(m,i.get("view").getProjection());a.querySelector(".featureLenHav").innerHTML=Math.round(.1*y)/100}else a.querySelector(".featureHav").style.display="none";for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(a),r.style.display="block",s.set("position",e.mapBrowserEvent.coordinate)}else{for(;r.firstChild;)r.removeChild(r.firstChild);r.style.display="none"}}));