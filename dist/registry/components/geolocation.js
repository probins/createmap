import e from"./geolocation.htm.js";import t from"./component.js";var o=new t(e,"geolocation");import n from"../../ext/ol.js";import r from"../../olMap.js";var i=r.get();var a=o.getTemplate("geolocation");i.addControl(new n.control.Control({element:a}));import l from"../../utils.js";var s=l.$;var g={ERROR:"Unable to retrieve your location",OUTSIDE:"Position outside map extent",UNSUPPORTED:"Geolocation is not supported by your browser"};a=o.getTemplate("geomarker");var c=a.getElementById("geomarker");var m=new n.Overlay({positioning:"center-center",element:c});i.addOverlay(m);s("#geolocationbutton").addEventListener("click",(function(){if(!navigator.geolocation){alert(g.UNSUPPORTED);return}function e(e){var t=[parseFloat(e.coords.longitude),parseFloat(e.coords.latitude)];t=n.proj.transform(t,"EPSG:4326",i.get("view").getProjection());var o=i.get("view").extent;if(!(o[0]<=t[0]&&t[0]<=o[2]&&o[1]<=t[1]&&t[1]<=o[3])){alert(g.OUTSIDE)}else{i.get("view").setCenter(t);i.get("view").setZoom(i.get("view").zoomIn);var r=e.heading?e.heading-45:-45;c.firstChild.style.transform="rotate("+r+"deg)";m.set("position",t)}}function t(){alert(g.ERROR)}navigator.geolocation.getCurrentPosition(e,t)}));import"./toolbar.js";s("#help-content").appendChild(o.getTemplate("geolocationhelp"));s("#geolocation-title").addEventListener("click",(function(){var e=this.nextElementSibling;e.style.display=e.style.display=="block"?"none":"block"}));