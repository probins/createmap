import{Y as t,Z as e,o,C as n}from"../../olMap-8ffb7ea3.js";import{n as r,l as s,I as i,bo as a,bp as d}from"../../size-aa14a1dc.js";import{$ as c}from"../../mapDef-32126832.js";class h extends t{constructor(t){const e=t||{},o=document.createElement("div");o.className=void 0!==e.className?e.className:"ol-mouse-position",super({element:o,render:e.render,target:e.target}),this.addEventListener(r("projection"),this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.undefinedHTML_=void 0!==e.undefinedHTML?e.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=o.innerHTML,this.mapProjection_=null,this.transform_=null}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get("coordinateFormat")}getProjection(){return this.get("projection")}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const o=t.getViewport();this.listenerKeys.push(s(o,e.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(s(o,e.POINTEROUT,this.handleMouseOut,this))}}setCoordinateFormat(t){this.set("coordinateFormat",t)}setProjection(t){this.set("projection",i(t))}updateHTML_(t){let e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?a(this.mapProjection_,t):d}const o=this.getMap().getCoordinateFromPixelInternal(t);if(o){this.transform_(o,o);const t=this.getCoordinateFormat();e=t?t(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}const l=o.get(),u=new n('\n<template id="cursorpositiontemplate">\n  <style>\n    .llcursor {\n      top: 8px;\n      right: 8px;\n      position: absolute;\n    }\n    .projcursor {\n      top: 28px;\n    }\n  </style>\n</template>\n',"cursorposition").getTemplate("cursorposition");function p(t,e,o){return t?e.replace("{x}",t[0].toFixed(o)).replace("{y}",t[1].toFixed(o)):""}function m(t,e,o){const n=void 0!==o?t.toFixed(o):""+t;let r=n.indexOf(".");return r=-1===r?n.length:r,r>e?n:new Array(1+e-r).join("0")+n}function f(t,e,o){const n=function(t,e){const o=t%e;return o*e<0?o+e:o}(t+180,360)-180,r=Math.abs(3600*n),s=o||0;return Math.floor(r/3600)+"° "+m(Math.floor(r/60%60),2)+"′ "+m(r%60,2,s)+"″ "+e.charAt(n<0?1:0)}document.head.appendChild(u),l.addControl(new h({coordinateFormat:function(t){return f(t[1],"NS")+" "+f(t[0],"EW")+" ("+p(t,"{y}, {x}",4)+")"},projection:"EPSG:4326",className:"llcursor"})),l.addControl(new h({coordinateFormat:function(t){return"projected: "+p(t,"{x}, {y}",0)},className:"llcursor projcursor"})),"EPSG:4326"==l.get("view").getProjection().getCode()&&(c(".projcursor").style.display="none");
