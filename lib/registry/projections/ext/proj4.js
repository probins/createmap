var t=484813681109536e-20,a=Math.PI/2,e=.017453292519943295,s=57.29577951308232,i=Math.PI/4,r=2*Math.PI,n={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},h={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},o=/[\s_\-\/\(\)]/g;function l(t,a){if(t[a])return t[a];for(var e,s=Object.keys(t),i=a.toLowerCase().replace(o,""),r=-1;++r<s.length;)if((e=s[r]).toLowerCase().replace(o,"")===i)return t[e]}function u(t){var a,s,i,r={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,a){var e=a.split("=");return e.push(!0),t[e[0].toLowerCase()]=e[1],t}),{}),u={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*e},lat_1:function(t){r.lat1=t*e},lat_2:function(t){r.lat2=t*e},lat_ts:function(t){r.lat_ts=t*e},lon_0:function(t){r.long0=t*e},lon_1:function(t){r.long1=t*e},lon_2:function(t){r.long2=t*e},alpha:function(t){r.alpha=parseFloat(t)*e},lonc:function(t){r.longc=t*e},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var a=l(h,t);a&&(r.to_meter=a.to_meter)},from_greenwich:function(t){r.from_greenwich=t*e},pm:function(t){var a=l(n,t);r.from_greenwich=(a||parseFloat(t))*e},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(r.axis=t)}};for(a in o)s=o[a],a in u?"function"==typeof(i=u[a])?i(s):r[i]=s:r[a]=s;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var c=/\s/,f=/[A-Za-z]/,d=/[A-Za-z84]/,m=/[,\]]/,p=/[\d\.E\-\+]/;function M(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function g(t,a,e){Array.isArray(a)&&(e.unshift(a),a=null);var s=a?{}:t,i=e.reduce((function(t,a){return _(a,t),t}),s);a&&(t[a]=i)}function _(t,a){if(Array.isArray(t)){var e=t.shift();if("PARAMETER"===e&&(e=t.shift()),1===t.length)return Array.isArray(t[0])?(a[e]={},void _(t[0],a[e])):void(a[e]=t[0]);if(t.length)if("TOWGS84"!==e){if("AXIS"===e)return e in a||(a[e]=[]),void a[e].push(t);var s;switch(Array.isArray(e)||(a[e]={}),e){case"UNIT":case"PRIMEM":case"VERT_DATUM":return a[e]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&_(t[2],a[e]));case"SPHEROID":case"ELLIPSOID":return a[e]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&_(t[3],a[e]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void g(a,e,t);default:for(s=-1;++s<t.length;)if(!Array.isArray(t[s]))return _(t,a[e]);return g(a,e,t)}}else a[e]=t;else a[e]=!0}else a[t]=!0}M.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;c.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},M.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(m.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},M.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},M.prototype.number=function(t){if(!p.test(t)){if(m.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},M.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},M.prototype.keyword=function(t){if(d.test(t))this.word+=t;else{if("["===t){var a=[];return a.push(this.word),this.level++,null===this.root?this.root=a:this.currentObject.push(a),this.stack.push(this.currentObject),this.currentObject=a,void(this.state=1)}if(!m.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},M.prototype.neutral=function(t){if(f.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(p.test(t))return this.word=t,void(this.state=3);if(!m.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},M.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function v(t){return.017453292519943295*t}function y(t){var a=new M(t).output(),e=a.shift(),s=a.shift();a.unshift(["name",s]),a.unshift(["type",e]);var i={};return _(a,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var a="",e=0,s=t.AXIS.length;e<s;++e){var i=t.AXIS[e][0].toLowerCase();-1!==i.indexOf("north")?a+="n":-1!==i.indexOf("south")?a+="s":-1!==i.indexOf("east")?a+="e":-1!==i.indexOf("west")&&(a+="w")}2===a.length&&(a+="u"),3===a.length&&(t.axis=a)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var r=t.GEOGCS;function n(a){return a*(t.to_meter||1)}"GEOGCS"===t.type&&(r=t),r&&(r.DATUM?t.datumCode=r.DATUM.name.toLowerCase():t.datumCode=r.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(t.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=r.DATUM.SPHEROID.a,t.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(t.datum_params=r.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",v],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",v],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",v],["lat0","latitude_of_origin",v],["lat0","standard_parallel_1",v],["lat1","standard_parallel_1",v],["lat2","standard_parallel_2",v],["azimuth","Azimuth"],["alpha","azimuth",v],["srsCode","name"]].forEach((function(a){return e=t,i=(s=a)[0],r=s[1],void(!(i in e)&&r in e&&(e[i]=e[r],3===s.length&&(e[i]=s[2](e[i]))));var e,s,i,r})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=v(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function b(t){var a=this;if(2===arguments.length){var e=arguments[1];"string"==typeof e?"+"===e.charAt(0)?b[t]=u(arguments[1]):b[t]=y(arguments[1]):b[t]=e}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?b.apply(a,t):b(t)}));if("string"==typeof t){if(t in b)return b[t]}else"EPSG"in t?b["EPSG:"+t.EPSG]=t:"ESRI"in t?b["ESRI:"+t.ESRI]=t:"IAU2000"in t?b["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(b);var x=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var w=["3857","900913","3785","102113"];function S(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in b}(t))return b[t];if(function(t){return x.some((function(a){return t.indexOf(a)>-1}))}(t)){var a=y(t);if(function(t){var a=l(t,"authority");if(a){var e=l(a,"epsg");return e&&w.indexOf(e)>-1}}(a))return b["EPSG:3857"];var e=function(t){var a=l(t,"extension");if(a)return l(a,"proj4")}(a);return e?u(e):a}return function(t){return"+"===t[0]}(t)?u(t):void 0}function C(t,a){var e,s;if(t=t||{},!a)return t;for(s in a)void 0!==(e=a[s])&&(t[s]=e);return t}function N(t,a,e){var s=t*a;return e/Math.sqrt(1-s*s)}function E(t){return t<0?-1:1}function O(t){return Math.abs(t)<=3.14159265359?t:t-E(t)*r}function P(t,e,s){var i=t*s,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(a-e))/i}function k(t,e){for(var s,i,r=.5*t,n=a-2*Math.atan(e),h=0;h<=15;h++)if(s=t*Math.sin(n),n+=i=a-2*Math.atan(e*Math.pow((1-s)/(1+s),r))-n,Math.abs(i)<=1e-10)return n;return-9999}function A(t){return t}var I=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=N(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,h=t.y;if(h*s>90&&h*s<-90&&n*s>180&&n*s<-180)return null;if(Math.abs(Math.abs(h)-a)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*O(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(i+.5*h));else{var o=Math.sin(h),l=P(this.e,h,o);e=this.x0+this.a*this.k0*O(n-this.long0),r=this.y0-this.a*this.k0*Math.log(l)}return t.x=e,t.y=r,t},inverse:function(t){var e,s,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)s=a-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var n=Math.exp(-r/(this.a*this.k0));if(-9999===(s=k(this.e,n)))return null}return e=O(this.long0+i/(this.a*this.k0)),t.x=e,t.y=s,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:A,inverse:A,names:["longlat","identity"]}],G={},L=[];function z(t,a){var e=L.length;return t.names?(L[e]=t,t.names.forEach((function(t){G[t.toLowerCase()]=e})),this):(console.log(a),!0)}var R={start:function(){I.forEach(z)},add:z,get:function(t){if(!t)return!1;var a=t.toLowerCase();return void 0!==G[a]&&L[G[a]]?L[G[a]]:void 0}},T={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},q=T.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};T.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var j={};function D(a,e){if(!(this instanceof D))return new D(a);e=e||function(t){if(t)throw t};var s=S(a);if("object"==typeof s){var i=D.projections.get(s.projName);if(i){if(s.datumCode&&"none"!==s.datumCode){var r=l(j,s.datumCode);r&&(s.datum_params=r.towgs84?r.towgs84.split(","):null,s.ellps=r.ellipse,s.datumName=r.datumName?r.datumName:s.datumCode)}s.k0=s.k0||1,s.axis=s.axis||"enu",s.ellps=s.ellps||"wgs84";var n,h,o,u,c,f,d,m=function(t,a,e,s,i){if(!t){var r=l(T,s);r||(r=q),t=r.a,a=r.b,e=r.rf}return e&&!a&&(a=(1-1/e)*t),(0===e||Math.abs(t-a)<1e-10)&&(i=!0,a=t),{a:t,b:a,rf:e,sphere:i}}(s.a,s.b,s.rf,s.ellps,s.sphere),p=(n=m.a,h=m.b,m.rf,o=s.R_A,f=((u=n*n)-(c=h*h))/u,d=0,o?(u=(n*=1-f*(.16666666666666666+f*(.04722222222222222+.022156084656084655*f)))*n,f=0):d=Math.sqrt(f),{es:f,e:d,ep2:(u-c)/c}),M=s.datum||function(a,e,s,i,r,n){var h={};return h.datum_type=void 0===a||"none"===a?5:4,e&&(h.datum_params=e.map(parseFloat),0===h.datum_params[0]&&0===h.datum_params[1]&&0===h.datum_params[2]||(h.datum_type=1),h.datum_params.length>3&&(0===h.datum_params[3]&&0===h.datum_params[4]&&0===h.datum_params[5]&&0===h.datum_params[6]||(h.datum_type=2,h.datum_params[3]*=t,h.datum_params[4]*=t,h.datum_params[5]*=t,h.datum_params[6]=h.datum_params[6]/1e6+1))),h.a=s,h.b=i,h.es=r,h.ep2=n,h}(s.datumCode,s.datum_params,m.a,m.b,p.es,p.ep2);C(this,s),C(this,i),this.a=m.a,this.b=m.b,this.rf=m.rf,this.sphere=m.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=M,this.init(),e(null,this)}else e(a)}else e(a)}function U(t){return 1===t||2===t}function F(t,e,s){return function(t,a){return t.datum_type===a.datum_type&&(!(t.a!==a.a||Math.abs(t.es-a.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===a.datum_params[0]&&t.datum_params[1]===a.datum_params[1]&&t.datum_params[2]===a.datum_params[2]:2!==t.datum_type||t.datum_params[0]===a.datum_params[0]&&t.datum_params[1]===a.datum_params[1]&&t.datum_params[2]===a.datum_params[2]&&t.datum_params[3]===a.datum_params[3]&&t.datum_params[4]===a.datum_params[4]&&t.datum_params[5]===a.datum_params[5]&&t.datum_params[6]===a.datum_params[6]))}(t,e)||5===t.datum_type||5===e.datum_type?s:t.es!==e.es||t.a!==e.a||U(t.datum_type)||U(e.datum_type)?(s=function(t,e,s){var i,r,n,h,o=t.x,l=t.y,u=t.z?t.z:0;if(l<-a&&l>-1.001*a)l=-a;else if(l>a&&l<1.001*a)l=a;else{if(l<-a)return{x:-1/0,y:-1/0,z:t.z};if(l>a)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),r=Math.sin(l),h=Math.cos(l),n=r*r,{x:((i=s/Math.sqrt(1-e*n))+u)*h*Math.cos(o),y:(i+u)*h*Math.sin(o),z:(i*(1-e)+u)*r}}(s,t.es,t.a),U(t.datum_type)&&(s=function(t,a,e){if(1===a)return{x:t.x+e[0],y:t.y+e[1],z:t.z+e[2]};if(2===a){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],l=e[6];return{x:l*(t.x-o*t.y+h*t.z)+s,y:l*(o*t.x+t.y-n*t.z)+i,z:l*(-h*t.x+n*t.y+t.z)+r}}}(s,t.datum_type,t.datum_params)),U(e.datum_type)&&(s=function(t,a,e){if(1===a)return{x:t.x-e[0],y:t.y-e[1],z:t.z-e[2]};if(2===a){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],l=e[6],u=(t.x-s)/l,c=(t.y-i)/l,f=(t.z-r)/l;return{x:u+o*c-h*f,y:-o*u+c+n*f,z:h*u-n*c+f}}}(s,e.datum_type,e.datum_params)),function(t,e,s,i){var r,n,h,o,l,u,c,f,d,m,p,M,g,_,v,y=t.x,b=t.y,x=t.z?t.z:0;if(r=Math.sqrt(y*y+b*b),n=Math.sqrt(y*y+b*b+x*x),r/s<1e-12){if(_=0,n/s<1e-12)return a,v=-i,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(b,y);h=x/n,f=(o=r/n)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*o*o)),d=h*l,g=0;do{g++,u=e*(c=s/Math.sqrt(1-e*d*d))/(c+(v=r*f+x*d-c*(1-e*d*d))),M=(p=h*(l=1/Math.sqrt(1-u*(2-u)*o*o)))*f-(m=o*(1-u)*l)*d,f=m,d=p}while(M*M>1e-24&&g<30);return{x:_,y:Math.atan(p/Math.abs(m)),z:v}}(s,e.es,e.a,e.b)):s}function Q(t,a,e){var s,i,r,n=e.x,h=e.y,o=e.z||0,l={};for(r=0;r<3;r++)if(!a||2!==r||void 0!==e.z)switch(0===r?(s=n,i=-1!=="ew".indexOf(t.axis[r])?"x":"y"):1===r?(s=h,i=-1!=="ns".indexOf(t.axis[r])?"y":"x"):(s=o,i="z"),t.axis[r]){case"e":l[i]=s;break;case"w":l[i]=-s;break;case"n":l[i]=s;break;case"s":l[i]=-s;break;case"u":void 0!==e[i]&&(l.z=s);break;case"d":void 0!==e[i]&&(l.z=-s);break;default:return null}return l}function W(t){var a={x:t[0],y:t[1]};return t.length>2&&(a.z=t[2]),t.length>3&&(a.m=t[3]),a}function B(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function J(t,a,i){var r;if(Array.isArray(i)&&(i=W(i)),function(t){B(t.x),B(t.y)}(i),t.datum&&a.datum&&function(t,a){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==a.datumCode||(1===a.datum.datum_type||2===a.datum.datum_type)&&"WGS84"!==t.datumCode}(t,a)&&(i=J(t,r=new D("WGS84"),i),t=r),"enu"!==t.axis&&(i=Q(t,!1,i)),"longlat"===t.projName)i={x:i.x*e,y:i.y*e,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;return t.from_greenwich&&(i.x+=t.from_greenwich),i=F(t.datum,a.datum,i),a.from_greenwich&&(i={x:i.x-a.from_greenwich,y:i.y,z:i.z||0}),"longlat"===a.projName?i={x:i.x*s,y:i.y*s,z:i.z||0}:(i=a.forward(i),a.to_meter&&(i={x:i.x/a.to_meter,y:i.y/a.to_meter,z:i.z||0})),"enu"!==a.axis?Q(a,!0,i):i}j.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},j.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},j.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},j.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},j.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},j.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},j.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},j.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},j.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},j.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},j.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},j.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},j.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},j.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},j.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},j.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},j.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},D.projections=R,D.projections.start();var H=D("WGS84");function K(t,a,e){var s,i,r;return Array.isArray(e)?(s=J(t,a,e)||{x:NaN,y:NaN},e.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==a.name&&"geocent"===a.name?"number"==typeof s.z?[s.x,s.y,s.z].concat(e.splice(3)):[s.x,s.y,e[2]].concat(e.splice(3)):[s.x,s.y].concat(e.splice(2)):[s.x,s.y]):(i=J(t,a,e),2===(r=Object.keys(e)).length||r.forEach((function(s){if(void 0!==t.name&&"geocent"===t.name||void 0!==a.name&&"geocent"===a.name){if("x"===s||"y"===s||"z"===s)return}else if("x"===s||"y"===s)return;i[s]=e[s]})),i)}function Z(t){return t instanceof D?t:t.oProj?t.oProj:D(t)}function V(t,a,e){t=Z(t);var s,i=!1;return void 0===a?(a=t,t=H,i=!0):(void 0!==a.x||Array.isArray(a))&&(e=a,a=t,t=H,i=!0),a=Z(a),e?K(t,a,e):(s={forward:function(e){return K(t,a,e)},inverse:function(e){return K(a,t,e)}},i&&(s.oProj=a),s)}var X=65,Y=73,$=79,tt={forward:at,inverse:function(t){var a=rt(ot(t.toUpperCase()));if(a.lat&&a.lon)return[a.lon,a.lat,a.lon,a.lat];return[a.left,a.bottom,a.right,a.top]},toPoint:et};function at(t,a){return a=a||5,function(t,a){var e="00000"+t.easting,s="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(d=t.easting,m=t.northing,p=t.zoneNumber,M=ht(p),g=Math.floor(d/1e5),_=Math.floor(m/1e5)%20,i=g,r=_,n=M,h=n-1,o="AJSAJS".charCodeAt(h),l="AFAFAF".charCodeAt(h),u=o+i-1,c=l+r,f=!1,u>90&&(u=u-90+X-1,f=!0),(u===Y||o<Y&&u>Y||(u>Y||o<Y)&&f)&&u++,(u===$||o<$&&u>$||(u>$||o<$)&&f)&&++u===Y&&u++,u>90&&(u=u-90+X-1),c>86?(c=c-86+X-1,f=!0):f=!1,(c===Y||l<Y&&c>Y||(c>Y||l<Y)&&f)&&c++,(c===$||l<$&&c>$||(c>$||l<$)&&f)&&++c===Y&&c++,c>86&&(c=c-86+X-1),String.fromCharCode(u)+String.fromCharCode(c))+e.substr(e.length-5,a)+s.substr(s.length-5,a);var i,r,n,h,o,l,u,c,f;var d,m,p,M,g,_}(function(t){var a,e,s,i,r,n,h,o=t.lat,l=t.lon,u=6378137,c=st(o),f=st(l);h=Math.floor((l+180)/6)+1,180===l&&(h=60);o>=56&&o<64&&l>=3&&l<12&&(h=32);o>=72&&o<84&&(l>=0&&l<9?h=31:l>=9&&l<21?h=33:l>=21&&l<33?h=35:l>=33&&l<42&&(h=37));n=st(6*(h-1)-180+3),.006739496752268451,a=u/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),e=Math.tan(c)*Math.tan(c),s=.006739496752268451*Math.cos(c)*Math.cos(c),i=Math.cos(c)*(f-n),r=u*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c));var d=.9996*a*(i+(1-e+s)*i*i*i/6+(5-18*e+e*e+72*s-.39089081163157013)*i*i*i*i*i/120)+5e5,m=.9996*(r+a*Math.tan(c)*(i*i/2+(5-e+9*s+4*s*s)*i*i*i*i/24+(61-58*e+e*e+600*s-2.2240339282485886)*i*i*i*i*i*i/720));o<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(d),zoneNumber:h,zoneLetter:nt(o)}}({lat:t[1],lon:t[0]}),a)}function et(t){var a=rt(ot(t.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat]:[(a.left+a.right)/2,(a.top+a.bottom)/2]}function st(t){return t*(Math.PI/180)}function it(t){return t/Math.PI*180}function rt(t){var a=t.northing,e=t.easting,s=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var r,n,h,o,l,u,c,f,d=6378137,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),p=e-5e5,M=a;s<"N"&&(M-=1e7),u=6*(i-1)-180+3,f=(c=M/.9996/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*c)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*c)+151*m*m*m/96*Math.sin(6*c),r=d/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),h=.006739496752268451*Math.cos(f)*Math.cos(f),o=.99330562*d/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=p/(.9996*r);var g=f-r*Math.tan(f)/o*(l*l/2-(5+3*n+10*h-4*h*h-.06065547077041606)*l*l*l*l/24+(61+90*n+298*h+45*n*n-1.6983531815716497-3*h*h)*l*l*l*l*l*l/720);g=it(g);var _,v=(l-(1+2*n+h)*l*l*l/6+(5-2*h+28*n-3*h*h+.05391597401814761+24*n*n)*l*l*l*l*l/120)/Math.cos(f);if(v=u+it(v),t.accuracy){var y=rt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});_={top:y.lat,right:y.lon,bottom:g,left:v}}else _={lat:g,lon:v};return _}function nt(t){var a="Z";return 84>=t&&t>=72?a="X":72>t&&t>=64?a="W":64>t&&t>=56?a="V":56>t&&t>=48?a="U":48>t&&t>=40?a="T":40>t&&t>=32?a="S":32>t&&t>=24?a="R":24>t&&t>=16?a="Q":16>t&&t>=8?a="P":8>t&&t>=0?a="N":0>t&&t>=-8?a="M":-8>t&&t>=-16?a="L":-16>t&&t>=-24?a="K":-24>t&&t>=-32?a="J":-32>t&&t>=-40?a="H":-40>t&&t>=-48?a="G":-48>t&&t>=-56?a="F":-56>t&&t>=-64?a="E":-64>t&&t>=-72?a="D":-72>t&&t>=-80&&(a="C"),a}function ht(t){var a=t%6;return 0===a&&(a=6),a}function ot(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var a,e=t.length,s=null,i="",r=0;!/[A-Z]/.test(a=t.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+t;i+=a,r++}var n=parseInt(i,10);if(0===r||r+3>e)throw"MGRSPoint bad conversion from: "+t;var h=t.charAt(r++);if(h<="A"||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+t;s=t.substring(r,r+=2);for(var o=ht(n),l=function(t,a){var e="AJSAJS".charCodeAt(a-1),s=1e5,i=!1;for(;e!==t.charCodeAt(0);){if(++e===Y&&e++,e===$&&e++,e>90){if(i)throw"Bad character: "+t;e=X,i=!0}s+=1e5}return s}(s.charAt(0),o),u=function(t,a){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var e="AFAFAF".charCodeAt(a-1),s=0,i=!1;for(;e!==t.charCodeAt(0);){if(++e===Y&&e++,e===$&&e++,e>86){if(i)throw"Bad character: "+t;e=X,i=!0}s+=1e5}return s}(s.charAt(1),o);u<lt(h);)u+=2e6;var c=e-r;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,m,p=c/2,M=0,g=0;return p>0&&(f=1e5/Math.pow(10,p),d=t.substring(r,r+p),M=parseFloat(d)*f,m=t.substring(r+p),g=parseFloat(m)*f),{easting:M+l,northing:g+u,zoneLetter:h,zoneNumber:n,accuracy:f}}function lt(t){var a;switch(t){case"C":a=11e5;break;case"D":a=2e6;break;case"E":a=28e5;break;case"F":a=37e5;break;case"G":a=46e5;break;case"H":a=55e5;break;case"J":a=64e5;break;case"K":a=73e5;break;case"L":a=82e5;break;case"M":a=91e5;break;case"N":a=0;break;case"P":a=8e5;break;case"Q":a=17e5;break;case"R":a=26e5;break;case"S":a=35e5;break;case"T":a=44e5;break;case"U":a=53e5;break;case"V":a=62e5;break;case"W":a=7e6;break;case"X":a=79e5;break;default:a=-1}if(a>=0)return a;throw"Invalid zone letter: "+t}function ut(t,a,e){if(!(this instanceof ut))return new ut(t,a,e);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===a){var s=t.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=t,this.y=a,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function ct(t,a){var e;return t>1e-7?(1-t*t)*(a/(1-(e=t*a)*e)-.5/t*Math.log((1-e)/(1+e))):2*a}ut.fromMGRS=function(t){return new ut(et(t))},ut.prototype.toMGRS=function(t){return at([this.x,this.y],t)};var ft={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-a)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=ct(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var a,e=[];return e[0]=.3333333333333333*t,a=t*t,e[0]+=.17222222222222222*a,e[1]=.06388888888888888*a,a*=t,e[0]+=.10257936507936508*a,e[1]+=.0664021164021164*a,e[2]=.016415012942191543*a,e}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ct(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,s,r,n,h,o,l,u,c,f,d=t.x,m=t.y;if(d=O(d-this.long0),this.sphere){if(h=Math.sin(m),f=Math.cos(m),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((s=this.mode===this.EQUIT?1+f*r:1+this.sinph0*h+this.cosph0*f*r)<=1e-10)return null;e=(s=Math.sqrt(2/s))*f*Math.sin(d),s*=this.mode===this.EQUIT?h:this.cosph0*h-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(m+this.lat0)<1e-10)return null;s=i-.5*m,e=(s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)))*Math.sin(d),s*=r}}else{switch(l=0,u=0,c=0,r=Math.cos(d),n=Math.sin(d),h=Math.sin(m),o=ct(this.e,h),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(l=o/this.qp,u=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:c=1+this.sinb1*l+this.cosb1*u*r;break;case this.EQUIT:c=1+u*r;break;case this.N_POLE:c=a+m,o=this.qp-o;break;case this.S_POLE:c=m-a,o=this.qp+o}if(Math.abs(c)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),s=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*l-this.sinb1*u*r):(c=Math.sqrt(2/(1+u*r)))*l*this.ymf,e=this.xmf*c*u*n;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*n,s=r*(this.mode===this.S_POLE?c:-c)):e=s=0}}return t.x=this.a*e+this.x0,t.y=this.a*s+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,s,i,r,n,h,o,l,u,c,f=t.x/this.a,d=t.y/this.a;if(this.sphere){var m,p=0,M=0;if((s=.5*(m=Math.sqrt(f*f+d*d)))>1)return null;switch(s=2*Math.asin(s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(M=Math.sin(s),p=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(m)<=1e-10?0:Math.asin(d*M/m),f*=M,d=p*m;break;case this.OBLIQ:s=Math.abs(m)<=1e-10?this.lat0:Math.asin(p*this.sinph0+d*M*this.cosph0/m),f*=M*this.cosph0,d=(p-Math.sin(s)*this.sinph0)*m;break;case this.N_POLE:d=-d,s=a-s;break;case this.S_POLE:s-=a}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,d):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,d*=this.dd,(h=Math.sqrt(f*f+d*d))<1e-10)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*h/this.rq),i=Math.cos(r),f*=r=Math.sin(r),this.mode===this.OBLIQ?(o=i*this.sinb1+d*r*this.cosb1/h,n=this.qp*o,d=h*this.cosb1*i-d*this.sinb1*r):(o=d*r/h,n=this.qp*o,d=h*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(n=f*f+d*d))return t.x=this.long0,t.y=this.lat0,t;o=1-n/this.qp,this.mode===this.S_POLE&&(o=-o)}e=Math.atan2(f,d),l=Math.asin(o),u=this.apa,c=l+l,s=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return t.x=O(this.long0+e),t.y=s,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},dt=.01068115234375;function mt(t,a,e,s){return e*=a,a*=a,s[0]*t-e*(s[1]+a*(s[2]+a*(s[3]+a*s[4])))}var pt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=function(t){var a=[];a[0]=1-t*(.25+t*(.046875+t*(.01953125+t*dt))),a[1]=t*(.75-t*(.046875+t*(.01953125+t*dt)));var e=t*t;return a[2]=e*(.46875-t*(.013020833333333334+.007120768229166667*t)),e*=t,a[3]=e*(.3645833333333333-.005696614583333333*t),a[4]=e*t*.3076171875,a}(this.es),this.ml0=mt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var a,e,s,i=t.x,r=t.y,n=O(i-this.long0),h=Math.sin(r),o=Math.cos(r);if(this.es){var l=o*n,u=Math.pow(l,2),c=this.ep2*Math.pow(o,2),f=Math.pow(c,2),d=Math.abs(o)>1e-10?Math.tan(r):0,m=Math.pow(d,2),p=Math.pow(m,2);a=1-this.es*Math.pow(h,2),l/=Math.sqrt(a);var M=mt(r,h,o,this.en);e=this.a*(this.k0*l*(1+u/6*(1-m+c+u/20*(5-18*m+p+14*c-58*m*c+u/42*(61+179*p-p*m-479*m)))))+this.x0,s=this.a*(this.k0*(M-this.ml0+h*n*l/2*(1+u/12*(5-m+9*c+4*f+u/30*(61+p-58*m+270*c-330*m*c+u/56*(1385+543*p-p*m-3111*m))))))+this.y0}else{var g=o*Math.sin(n);if(Math.abs(Math.abs(g)-1)<1e-10)return 93;if(e=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,s=o*Math.cos(n)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(s))>=1){if(g-1>1e-10)return 93;s=0}else s=Math.acos(s);r<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return t.x=e,t.y=s,t},inverse:function(t){var e,s,i,r,n=(t.x-this.x0)*(1/this.a),h=(t.y-this.y0)*(1/this.a);if(this.es)if(s=function(t,a,e){for(var s=1/(1-a),i=t,r=20;r;--r){var n=Math.sin(i),h=1-a*n*n;if(i-=h=(mt(i,n,Math.cos(i),e)-t)*(h*Math.sqrt(h))*s,Math.abs(h)<1e-10)return i}return i}(e=this.ml0+h/this.k0,this.es,this.en),Math.abs(s)<a){var o=Math.sin(s),l=Math.cos(s),u=Math.abs(l)>1e-10?Math.tan(s):0,c=this.ep2*Math.pow(l,2),f=Math.pow(c,2),d=Math.pow(u,2),m=Math.pow(d,2);e=1-this.es*Math.pow(o,2);var p=n*Math.sqrt(e)/this.k0,M=Math.pow(p,2);i=s-(e*=u)*M/(1-this.es)*.5*(1-M/12*(5+3*d-9*c*d+c-4*f-M/30*(61+90*d-252*c*d+45*m+46*c-M/56*(1385+3633*d+4095*m+1574*m*d)))),r=O(this.long0+p*(1-M/6*(1+2*d+c-M/20*(5+28*d+24*m+8*c*d+6*c-M/42*(61+662*d+1320*m+720*m*d))))/l)}else i=a*E(h),r=0;else{var g=Math.exp(n/this.k0),_=.5*(g-1/g),v=this.lat0+h/this.k0,y=Math.cos(v);e=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(_,2))),i=Math.asin(e),h<0&&(i=-i),r=0===_&&0===y?0:O(Math.atan2(_,y)+this.long0)}return t.x=r,t.y=i,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]};var Mt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var a=Math.sin(this.lat1),e=Math.cos(this.lat1),s=N(this.e,a,e),i=P(this.e,this.lat1,a),r=Math.sin(this.lat2),n=Math.cos(this.lat2),h=N(this.e,r,n),o=P(this.e,this.lat2,r),l=P(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(s/h)/Math.log(i/o):this.ns=a,isNaN(this.ns)&&(this.ns=a),this.f0=s/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,s=t.y;Math.abs(2*Math.abs(s)-Math.PI)<=1e-10&&(s=E(s)*(a-2e-10));var i,r,n=Math.abs(Math.abs(s)-a);if(n>1e-10)i=P(this.e,s,Math.sin(s)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((n=s*this.ns)<=0)return null;r=0}var h=this.ns*O(e-this.long0);return t.x=this.k0*(r*Math.sin(h))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(h))+this.y0,t},inverse:function(t){var e,s,i,r,n,h=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(h*h+o*o),s=1):(e=-Math.sqrt(h*h+o*o),s=-1);var l=0;if(0!==e&&(l=Math.atan2(s*h,s*o)),0!==e||this.ns>0){if(s=1/this.ns,i=Math.pow(e/(this.a*this.f0),s),-9999===(r=k(this.e,i)))return null}else r=-a;return n=O(l/this.ns+this.long0),t.x=n,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var gt={init:function(){var t=this.lat0;this.lambda0=this.long0;var a=Math.sin(t),e=this.a,s=1/this.rf,i=2*s-Math.pow(s,2),r=this.e=Math.sqrt(i);this.R=this.k0*e*Math.sqrt(1-i)/(1-i*Math.pow(a,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(a/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),o=Math.log((1+r*a)/(1-r*a));this.K=n-this.alpha*h+this.alpha*r/2*o},forward:function(t){var a=Math.log(Math.tan(Math.PI/4-t.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(a+e)+this.K,i=2*(Math.atan(Math.exp(s))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(r))),h=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,t.x=this.R*n+this.x0,t},inverse:function(t){for(var a=t.x-this.x0,e=t.y-this.y0,s=a/this.R,i=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(s)),n=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(i))),h=this.lambda0+n/this.alpha,o=0,l=r,u=-1e3,c=0;Math.abs(l-u)>1e-7;){if(++c>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(o))-Math.PI/2}return t.x=h,t.y=l,t},names:["somerc"]};function _t(t){var a=Math.exp(t);return a=(a-1/a)/2}function vt(t,a){t=Math.abs(t),a=Math.abs(a);var e=Math.max(t,a),s=Math.min(t,a)/(e||1);return e*Math.sqrt(1+Math.pow(s,2))}function yt(t){var a=Math.abs(t);return a=function(t){var a=1+t,e=a-1;return 0===e?t:t*Math.log(a)/e}(a*(1+a/(vt(1,a)+1))),t<0?-a:a}function bt(t,a){for(var e,s=2*Math.cos(2*a),i=t.length-1,r=t[i],n=0;--i>=0;)e=s*r-n+t[i],n=r,r=e;return a+e*Math.sin(2*a)}function xt(t,a,e){for(var s,i,r=Math.sin(a),n=Math.cos(a),h=_t(e),o=function(t){var a=Math.exp(t);return a=(a+1/a)/2}(e),l=2*n*o,u=-2*r*h,c=t.length-1,f=t[c],d=0,m=0,p=0;--c>=0;)s=m,i=d,f=l*(m=f)-s-u*(d=p)+t[c],p=u*m-i+l*d;return[(l=r*o)*f-(u=n*h)*p,l*p+u*f]}var wt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),a=t/(2-t),e=a;this.cgb[0]=a*(2+a*(-2/3+a*(a*(116/45+a*(26/45+a*(-2854/675)))-2))),this.cbg[0]=a*(a*(2/3+a*(4/3+a*(-82/45+a*(32/45+a*(4642/4725)))))-2),e*=a,this.cgb[1]=e*(7/3+a*(a*(-227/45+a*(2704/315+a*(2323/945)))-1.6)),this.cbg[1]=e*(5/3+a*(-16/15+a*(-13/9+a*(904/315+a*(-1522/945))))),e*=a,this.cgb[2]=e*(56/15+a*(-136/35+a*(-1262/105+a*(73814/2835)))),this.cbg[2]=e*(-26/15+a*(34/21+a*(1.6+a*(-12686/2835)))),e*=a,this.cgb[3]=e*(4279/630+a*(-332/35+a*(-399572/14175))),this.cbg[3]=e*(1237/630+a*(a*(-24832/14175)-2.4)),e*=a,this.cgb[4]=e*(4174/315+a*(-144838/6237)),this.cbg[4]=e*(-734/315+a*(109598/31185)),e*=a,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(a,2),this.Qn=this.k0/(1+a)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=a*(a*(2/3+a*(-37/96+a*(1/360+a*(81/512+a*(-96199/604800)))))-.5),this.gtu[0]=a*(.5+a*(-2/3+a*(5/16+a*(41/180+a*(-127/288+a*(7891/37800)))))),this.utg[1]=e*(-1/48+a*(-1/15+a*(437/1440+a*(-46/105+a*(1118711/3870720))))),this.gtu[1]=e*(13/48+a*(a*(557/1440+a*(281/630+a*(-1983433/1935360)))-.6)),e*=a,this.utg[2]=e*(-17/480+a*(37/840+a*(209/4480+a*(-5569/90720)))),this.gtu[2]=e*(61/240+a*(-103/140+a*(15061/26880+a*(167603/181440)))),e*=a,this.utg[3]=e*(-4397/161280+a*(11/504+a*(830251/7257600))),this.gtu[3]=e*(49561/161280+a*(-179/168+a*(6601661/7257600))),e*=a,this.utg[4]=e*(-4583/161280+a*(108847/3991680)),this.gtu[4]=e*(34729/80640+a*(-3418889/1995840)),e*=a,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=.6650675310896665*e;var s=bt(this.cbg,this.lat0);this.Zb=-this.Qn*(s+function(t,a){for(var e,s=2*Math.cos(a),i=t.length-1,r=t[i],n=0;--i>=0;)e=s*r-n+t[i],n=r,r=e;return Math.sin(a)*e}(this.gtu,2*s))},forward:function(t){var a=O(t.x-this.long0),e=t.y;e=bt(this.cbg,e);var s=Math.sin(e),i=Math.cos(e),r=Math.sin(a),n=Math.cos(a);e=Math.atan2(s,n*i),a=Math.atan2(r*i,vt(s,i*n)),a=yt(Math.tan(a));var h,o,l=xt(this.gtu,2*e,2*a);return e+=l[0],a+=l[1],Math.abs(a)<=2.623395162778?(h=this.a*(this.Qn*a)+this.x0,o=this.a*(this.Qn*e+this.Zb)+this.y0):(h=1/0,o=1/0),t.x=h,t.y=o,t},inverse:function(t){var a,e,s=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,s/=this.Qn,Math.abs(s)<=2.623395162778){var r=xt(this.utg,2*i,2*s);i+=r[0],s+=r[1],s=Math.atan(_t(s));var n=Math.sin(i),h=Math.cos(i),o=Math.sin(s),l=Math.cos(s);i=Math.atan2(n*l,vt(o,l*h)),a=O((s=Math.atan2(o,l*h))+this.long0),e=bt(this.cgb,i)}else a=1/0,e=1/0;return t.x=a,t.y=e,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var St={init:function(){var t=function(t,a){if(void 0===t){if((t=Math.floor(30*(O(a)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*e,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,wt.init.apply(this),this.forward=wt.forward,this.inverse=wt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Ct(t,a){return Math.pow((1-t)/(1+t),a)}var Nt={init:function(){var t=Math.sin(this.lat0),a=Math.cos(this.lat0);a*=a,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*a*a/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*Ct(this.e*t,this.ratexp))},forward:function(t){var e=t.x,s=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*s+i),this.C)*Ct(this.e*Math.sin(s),this.ratexp))-a,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,s=t.y,r=Math.pow(Math.tan(.5*s+i)/this.K,1/this.C),n=20;n>0&&(s=2*Math.atan(r*Ct(this.e*Math.sin(t.y),-.5*this.e))-a,!(Math.abs(s-t.y)<1e-14));--n)t.y=s;return n?(t.x=e,t.y=s,t):null},names:["gauss"]};var Et={init:function(){Nt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var a,e,s,i;return t.x=O(t.x-this.long0),Nt.forward.apply(this,[t]),a=Math.sin(t.y),e=Math.cos(t.y),s=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*a+this.cosc0*e*s),t.x=i*e*Math.sin(t.x),t.y=i*(this.cosc0*a-this.sinc0*e*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var a,e,s,i,r;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,r=Math.sqrt(t.x*t.x+t.y*t.y)){var n=2*Math.atan2(r,this.R2);a=Math.sin(n),e=Math.cos(n),i=Math.asin(e*this.sinc0+t.y*a*this.cosc0/r),s=Math.atan2(t.x*a,r*this.cosc0*e-t.y*this.sinc0*a)}else i=this.phic0,s=0;return t.x=s,t.y=i,Nt.inverse.apply(this,[t]),t.x=O(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};V.defaultDatum="WGS84",V.Proj=D,V.WGS84=new V.Proj("WGS84"),V.Point=ut,V.toPoint=W,V.defs=b,V.transform=J,V.mgrs=tt,V.version="2.6.3-alpha",function(t){t.Proj.projections.add(ft),t.Proj.projections.add(pt),t.Proj.projections.add(Mt),t.Proj.projections.add(gt),t.Proj.projections.add(St),t.Proj.projections.add(Et)}(V);export default V;
